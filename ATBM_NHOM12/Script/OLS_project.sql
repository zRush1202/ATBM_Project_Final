CREATE TABLE ADPRO.THONGBAO (
    ID INT,
    NoiDung NVARCHAR2(500),
    PRIMARY KEY (ID)
);
/

BEGIN
  SA_SYSDBA.CREATE_POLICY(
    policy_name => 'THONGBAO_POLICY', 
    column_name => 'THONGBAO_LABEL'
  );
END;

--
--SELECT *
--FROM DBA_SA_POLICIES
--
--BEGIN
--  SA_SYSDBA.DROP_POLICY(
--    policy_name => 'THONGBAO_POLICY',
--    drop_column => True
--  );
--END;

EXEC SA_SYSDBA.ENABLE_POLICY ('THONGBAO_POLICY'); 

--SELECT * FROM DBA_SA_LEVELS;
--SELECT * FROM DBA_SA_COMPARTMENTS;
--EXECUTE SA_COMPONENTS.DROP_COMPARTMENT('THONGBAO_POLICY','HTTT'); 
--SELECT * FROM DBA_SA_GROUPS;
--SELECT * FROM DBA_SA_GROUP_HIERARCHY; 

EXECUTE SA_COMPONENTS.CREATE_LEVEL('THONGBAO_POLICY',20,'TK','TRUONG KHOA');
EXECUTE SA_COMPONENTS.CREATE_LEVEL('THONGBAO_POLICY',40,'TDV','TRUONG DON VI');
EXECUTE SA_COMPONENTS.CREATE_LEVEL('THONGBAO_POLICY',60,'GV','GIANG VIEN');
EXECUTE SA_COMPONENTS.CREATE_LEVEL('THONGBAO_POLICY',80,'GVU','GIAO VU');
EXECUTE SA_COMPONENTS.CREATE_LEVEL('THONGBAO_POLICY',100,'NV','NHAN VIEN');
EXECUTE SA_COMPONENTS.CREATE_LEVEL('THONGBAO_POLICY',120,'SV','SINH VIEN');
    
EXECUTE SA_COMPONENTS.CREATE_COMPARTMENT('THONGBAO_POLICY',10,'HTTT','HE THONG THONG TIN');
EXECUTE SA_COMPONENTS.CREATE_COMPARTMENT('THONGBAO_POLICY',30,'CNPM','CONG NGHE PHAN MEM'); 
EXECUTE SA_COMPONENTS.CREATE_COMPARTMENT('THONGBAO_POLICY',50,'KHMT','KHOA HOC MAY TINH'); 
EXECUTE SA_COMPONENTS.CREATE_COMPARTMENT('THONGBAO_POLICY',70,'CNTT','CÔNG NGHE TRI THUC'); 
EXECUTE SA_COMPONENTS.CREATE_COMPARTMENT('THONGBAO_POLICY',90,'TGMT','THI GIAC MAY TINH'); 
EXECUTE SA_COMPONENTS.CREATE_COMPARTMENT('THONGBAO_POLICY',110,'MMT','MANG MAY TINH'); 

EXECUTE SA_COMPONENTS.CREATE_GROUP('THONGBAO_POLICY',20,'CS1','CO SO 1'); 
EXECUTE SA_COMPONENTS.CREATE_GROUP('THONGBAO_POLICY',40,'CS2','CO SO 2');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (1, N'Thông báo quan trọng cho Trưởng Khoa.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (2, N'Thông báo quan trọng cho Trưởng Đơn Vị.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (3, N'Thông báo quan trọng cho Giảng Viên.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (4, N'Thông báo quan trọng cho Giáo Vụ.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (5, N'Thông báo quan trọng cho Nhân Viên.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (6, N'Thông báo quan trọng cho Sinh Viên.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (7, N'Thông báo quan trọng về Hệ Thống Thông Tin.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (8, N'Thông báo quan trọng về Công Nghệ Phần Mềm.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (9, N'Thông báo quan trọng về Khoa Học Máy Tính.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (10, N'Thông báo quan trọng về Công Nghệ Tri Thức.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (11, N'Thông báo quan trọng về Thị Giác Máy Tính.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (12, N'Thông báo quan trọng về Mạng Máy Tính.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (13, N'Thông báo quan trọng cho Cơ Sở 1.');

INSERT INTO ADPRO.THONGBAO (ID, NoiDung)
VALUES (14, N'Thông báo quan trọng cho Cơ Sở 2.');


BEGIN 
 SA_POLICY_ADMIN.APPLY_TABLE_POLICY ( 
 POLICY_NAME => 'THONGBAO_POLICY',
 SCHEMA_NAME => 'ADPRO', 
 TABLE_NAME => 'THONGBAO',
 TABLE_OPTIONS => 'NO_CONTROL'
 ); 
END;

UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', 'TK', NULL, NULL)
WHERE ID = 1;

UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', 'TDV', NULL, NULL)
WHERE ID = 2;

UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', 'GV', NULL, NULL)
WHERE ID = 3;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', 'GVU', NULL, NULL)
WHERE ID = 4;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', 'NV', NULL, NULL)
WHERE ID = 5;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', 'SV', NULL, NULL)
WHERE ID = 6;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, 'HTTT', NULL)
WHERE ID = 7;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, 'CNPM', NULL)
WHERE ID = 8;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, 'KHMT', NULL)
WHERE ID = 9;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, 'CNTT', NULL)
WHERE ID = 10;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, 'TGMT', NULL)
WHERE ID = 11;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, 'MMT', NULL)
WHERE ID = 12;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, NULL, 'CS1')
WHERE ID = 13;
UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY', NULL, NULL, 'CS2')
WHERE ID = 14;

 

UPDATE THONGBAO 
SET THONGBAO_LABEL = CHAR_TO_LABEL('THONGBAO_POLICY','L1');

BEGIN 
SA_POLICY_ADMIN.REMOVE_TABLE_POLICY('THONGBAO_POLICY','ADPRO','THONGBAO');

SA_POLICY_ADMIN.APPLY_TABLE_POLICY ( 
 policy_name => 'THONGBAO_POLICY', 
 schema_name => 'ADPRO', 
 table_name => 'THONGBAO',
 table_options => 'READ_CONTROL',
predicate => NULL 
); 
END; 

UPDATE customers 
SET first_name = first_name; 
COMMIT;

GRANT CONNECT TO sales_manager, sales_north, sales_south, sales_east, sales_west; 
GRANT SELECT ON ADMIN_OLS.OLS_KHACHHANG TO sales_manager, sales_north, 
sales_south, sales_east, sales_west; 


BEGIN
--e)
 SA_USER_ADMIN.SET_USER_LABELS('THONGBAO_POLICY','sales_manager','SV:HTTT:CS1'); 
--f)
 SA_USER_ADMIN.SET_USER_LABELS('THONGBAO_POLICY','sales_north','TDV:KHMT:CS1'); 
--g)
 SA_USER_ADMIN.SET_USER_LABELS('THONGBAO_POLICY','sales_south','TDV:KHMT:CS1,CS2'); 
END;
